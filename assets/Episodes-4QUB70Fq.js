import{r as n,c as w,o as z,a,b as s,d as x,e as f,w as E,v as M,t as m,F as k,f as _,g as $,h as t,i as C,u as A}from"./index-GjR-g8a3.js";import{_ as B,a as L,b as N,I as V,c as F}from"./ErrorState-D6YgW8i2.js";const S={class:"pt-24 pb-16 max-w-7xl mx-auto px-6 lg:px-8"},D={key:0,class:"mb-8 max-w-xl mx-auto"},T={class:"relative"},I={key:0,class:"text-sm text-zinc-500 dark:text-zinc-400 mt-2 text-center"},P={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},R={key:3},U={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},j={key:1,class:"text-center py-20"},G={key:2,class:"text-center mt-12"},H=["disabled"],Q={key:0},q={key:1,class:"flex items-center gap-2"},J={key:3,class:"text-center text-sm text-zinc-500 dark:text-zinc-400 mt-4"},X={__name:"Episodes",setup(K){const l=n([]),c=n(!0),u=n(!1),d=n(null),g=n(1),v=n(!0),i=n(""),p=w(()=>i.value?l.value.filter(r=>r.name.toLowerCase().includes(i.value.toLowerCase())):l.value),h=async(r=1)=>{try{d.value=null;const e=await L.getEpisodes(r);Array.isArray(e.data)?(r===1?l.value=e.data:l.value.push(...e.data),v.value=e.data.length===10):(l.value=r===1?[e.data]:[...l.value,e.data],v.value=!1)}catch(e){console.error("Failed to fetch episodes:",e),d.value="Failed to load episodes. Please check your connection.",v.value=!1}finally{c.value=!1,u.value=!1}},y=async()=>{u.value=!0,g.value++,await h(g.value)},b=()=>{c.value=!0,g.value=1,h(1)};return z(()=>{h(1)}),(r,e)=>(t(),a("div",S,[e[4]||(e[4]=s("div",{class:"text-center mb-12"},[s("h2",{class:"text-3xl font-extrabold tracking-tight text-simpson-pink dark:text-simpson-pink sm:text-5xl mb-4 drop-shadow-sm"}," Episodes "),s("p",{class:"text-lg text-zinc-600 dark:text-zinc-400 font-medium"}," Every adventure, every gag. ")],-1)),!c.value&&!d.value?(t(),a("div",D,[s("div",T,[E(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"text",placeholder:"Search episodes...",class:"w-full px-4 py-3 pl-12 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-simpson-pink"},null,512),[[M,i.value]]),e[1]||(e[1]=s("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),i.value?(t(),a("p",I," Found "+m(p.value.length)+" episode"+m(p.value.length!==1?"s":""),1)):x("",!0)])):x("",!0),c.value?(t(),a("div",P,[(t(),a(k,null,_(6,o=>C(N,{key:o})),64))])):d.value?(t(),f(B,{key:2,message:d.value,onRetry:b},null,8,["message"])):(t(),a("div",R,[p.value.length>0?(t(),a("div",U,[(t(!0),a(k,null,_(p.value,o=>(t(),f(F,{key:o.id,title:o.name,subtitle:`Season ${o.season} â€¢ Episode ${o.episode_number}`,image:o.image_path?`${A(V)}${o.image_path}`:`https://via.placeholder.com/300x169?text=Episode+${o.id}`,badges:[`Air Date: ${o.airdate||"N/A"}`]},null,8,["title","subtitle","image","badges"]))),128))])):(t(),a("div",j,[...e[2]||(e[2]=[s("div",{class:"text-6xl mb-4"},"ðŸ“º",-1),s("h3",{class:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"}," No episodes found ",-1),s("p",{class:"text-zinc-600 dark:text-zinc-400"}," Try a different search term. ",-1)])])),v.value&&!i.value?(t(),a("div",G,[s("button",{onClick:y,disabled:u.value,class:"bg-simpson-pink hover:bg-pink-600 disabled:bg-zinc-400 text-white px-8 py-3 rounded-full font-bold transition-all shadow-lg hover:shadow-xl disabled:cursor-not-allowed"},[u.value?(t(),a("span",q,[...e[3]||(e[3]=[s("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$(" Loading... ",-1)])])):(t(),a("span",Q,"Load More"))],8,H)])):x("",!0),i.value?x("",!0):(t(),a("p",J," Showing "+m(l.value.length)+" episode"+m(l.value.length!==1?"s":""),1))]))]))}};export{X as default};
