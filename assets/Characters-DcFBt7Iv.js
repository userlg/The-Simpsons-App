import{r as n,c as w,o as z,a as s,b as a,d as x,e as f,w as C,v as M,t as p,F as y,f as _,g as B,h as t,i as L,u as N}from"./index-GjR-g8a3.js";import{_ as V,a as A,b as F,I as S,c as $}from"./ErrorState-D6YgW8i2.js";const T={class:"pt-24 pb-16 max-w-7xl mx-auto px-6 lg:px-8"},D={key:0,class:"mb-8 max-w-xl mx-auto"},E={class:"relative"},I={key:0,class:"text-sm text-zinc-500 dark:text-zinc-400 mt-2 text-center"},j={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"},P={key:3},R={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"},U={key:1,class:"text-center py-20"},G={key:2,class:"text-center mt-12"},H=["disabled"],Q={key:0},q={key:1,class:"flex items-center gap-2"},J={key:3,class:"text-center text-sm text-zinc-500 dark:text-zinc-400 mt-4"},X={__name:"Characters",setup(K){const o=n([]),d=n(!0),u=n(!1),c=n(null),g=n(1),v=n(!0),r=n(""),h=w(()=>r.value?o.value.filter(i=>i.name.toLowerCase().includes(r.value.toLowerCase())):o.value),m=async(i=1)=>{try{c.value=null;const e=await A.getCharacters(i);Array.isArray(e.data)?(i===1?o.value=e.data:o.value.push(...e.data),v.value=e.data.length===10):(o.value=i===1?[e.data]:[...o.value,e.data],v.value=!1)}catch(e){console.error("Failed to fetch characters:",e),c.value="Failed to load characters. Please check your connection.",v.value=!1}finally{d.value=!1,u.value=!1}},k=async()=>{u.value=!0,g.value++,await m(g.value)},b=()=>{d.value=!0,g.value=1,m(1)};return z(()=>{m(1)}),(i,e)=>(t(),s("div",T,[e[4]||(e[4]=a("div",{class:"text-center mb-12"},[a("h2",{class:"text-3xl font-extrabold tracking-tight text-simpson-blue dark:text-simpson-yellow sm:text-5xl mb-4 drop-shadow-sm"}," Characters "),a("p",{class:"text-lg text-zinc-600 dark:text-zinc-400 font-medium"}," The faces of Springfield. ")],-1)),!d.value&&!c.value?(t(),s("div",D,[a("div",E,[C(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"text",placeholder:"Search characters...",class:"w-full px-4 py-3 pl-12 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-simpson-blue"},null,512),[[M,r.value]]),e[1]||(e[1]=a("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),r.value?(t(),s("p",I," Found "+p(h.value.length)+" character"+p(h.value.length!==1?"s":""),1)):x("",!0)])):x("",!0),d.value?(t(),s("div",j,[(t(),s(y,null,_(8,l=>L(F,{key:l})),64))])):c.value?(t(),f(V,{key:2,message:c.value,onRetry:b},null,8,["message"])):(t(),s("div",P,[h.value.length>0?(t(),s("div",R,[(t(!0),s(y,null,_(h.value,l=>(t(),f($,{key:l.id,title:l.name,subtitle:l.occupation,image:l.portrait_path?`${N(S)}${l.portrait_path}`:"https://via.placeholder.com/300?text=No+Image",badges:[l.status,l.gender].filter(Boolean)},null,8,["title","subtitle","image","badges"]))),128))])):(t(),s("div",U,[...e[2]||(e[2]=[a("div",{class:"text-6xl mb-4"},"üç©",-1),a("h3",{class:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"}," No characters found ",-1),a("p",{class:"text-zinc-600 dark:text-zinc-400"}," D'oh! Try adjusting your search. ",-1)])])),v.value&&!r.value?(t(),s("div",G,[a("button",{onClick:k,disabled:u.value,class:"bg-simpson-blue hover:bg-blue-600 disabled:bg-zinc-400 text-white px-8 py-3 rounded-full font-bold transition-all shadow-lg hover:shadow-xl disabled:cursor-not-allowed"},[u.value?(t(),s("span",q,[...e[3]||(e[3]=[a("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" Loading... ",-1)])])):(t(),s("span",Q,"Load More"))],8,H)])):x("",!0),r.value?x("",!0):(t(),s("p",J," Showing "+p(o.value.length)+" character"+p(o.value.length!==1?"s":""),1))]))]))}};export{X as default};
